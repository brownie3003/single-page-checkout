{{checkout-nav user=order.user shippingAddress=order.shippingAddress}}

<div class="row">
    <div class="col-md-12">
        <h2>Shipping Options</h2>
    </div>
</div>
<div class="row">
    <div class="col-md-4 col-md-push-8">
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default">
                    <div class="panel-body">
                        {{#order-summary order=order}}
                            {{#order-total order=order}}
                                {{mini-promo-code applyDiscount="applyDiscount" discount=order.discount}}
                            {{/order-total}}
                        {{/order-summary}}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-8 col-md-pull-4">
        <div class="row">
            <div class="col-md-12">
                {{!-- TODO figure out why order.deliveryMethod needs to be invoked on 
                the template in order for {{delivery-methods}} component to re-render
                when it changes --}}
                <div class="hidden">{{order.deliveryMethod}}</div>
                {{delivery-methods 
                    shippingCountry=order.shippingCountry 
                    selectedDeliveryMethod=order.deliveryMethod 
                    setDeliveryMethod="setDeliveryMethod"
                    setShippingCountry="setShippingCountry"
                }}
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default">
                    <div class="panel-body">
                        {{#link-to 'order.shipping-address'}}
                            <button type="button" name="button" class="btn btn-block btn-moo">Enter Shipping Address</button>
                        {{/link-to}}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
